<section class="portfolio-section">
  <div class="container">
    <!-- Header Section -->
    <div class="section-header">
      <h2 class="section-title">Mi Portafolio</h2>
      <p class="section-subtitle">
        Una selecci√≥n de proyectos que demuestran mis habilidades y experiencia
      </p>
    </div>

    <!-- Filter Tabs -->
    <div class="filter-tabs">
      <button 
        class="filter-tab"
        [class.active]="activeFilter === 'all'"
        (click)="setFilter('all')"
      >
        <i class="bi bi-grid"></i>
        <span>{{ 'portfolio.filters.all' | translate }}</span>
      </button>
      <button 
        class="filter-tab"
        [class.active]="activeFilter === 'personal'"
        (click)="setFilter('personal')"
      >
        <i class="bi bi-person"></i>
        <span>{{ 'portfolio.filters.personal' | translate }}</span>
      </button>
      <button 
        class="filter-tab"
        [class.active]="activeFilter === 'professional'"
        (click)="setFilter('professional')"
      >
        <i class="bi bi-briefcase"></i>
        <span>{{ 'portfolio.filters.professional' | translate }}</span>
      </button>
    </div>

    <!-- Projects Grid -->
    <div class="projects-grid">
      <div 
        *ngFor="let project of filteredProjects; let i = index" 
        class="project-card"
        (click)="showDetails(project)"
      >
        <div class="card-image">
          <img 
            [src]="project.images[0] || 'https://images.pexels.com/photos/270348/pexels-photo-270348.jpeg'" 
            [alt]="project.title"
            class="project-image"
          />
          <div class="image-overlay">
            <div class="overlay-content">
              <button class="overlay-button primary">
                <i class="bi bi-eye"></i>
                <span>{{ 'portfolio.project.viewDetails' | translate }}</span>
              </button>
              <div class="overlay-links">
                <a 
                  *ngIf="project.githubUrl" 
                  [href]="project.githubUrl" 
                  target="_blank" 
                  class="overlay-link"
                  (click)="$event.stopPropagation()"
                >
                  <i class="bi bi-github"></i>
                </a>
                <a 
                  *ngIf="project.liveUrl" 
                  [href]="project.liveUrl" 
                  target="_blank" 
                  class="overlay-link"
                  (click)="$event.stopPropagation()"
                >
                  <i class="bi bi-box-arrow-up-right"></i>
                </a>
              </div>
            </div>
          </div>
        </div>
        
        <div class="card-content">
          <div class="project-category">
            <span class="category-badge" [class]="project.type">
              <i [class]="project.type === 'personal' ? 'bi bi-person' : 'bi bi-briefcase'"></i>
              {{ project.type === 'personal' ? ('portfolio.project.personal' | translate) : ('portfolio.project.professional' | translate) }}
            </span>
          </div>
          
          <h3 class="project-title">{{ 'projects.' + project.id + '.title' | translate }}</h3>
          <p class="project-description">{{ 'projects.' + project.id + '.description' | translate }}</p>
          
          <div class="tech-stack">
            <div class="tech-item" *ngFor="let tech of project.frameworks.slice(0, 4)">
              <i [class]="getTechIcon(tech)"></i>
              <span>{{ tech }}</span>
            </div>
            <div *ngIf="project.frameworks.length > 4" class="tech-more">
              +{{ project.frameworks.length - 4 }}
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div *ngIf="filteredProjects.length === 0" class="empty-state">
      <div class="empty-icon">
        <i class="bi bi-folder-x"></i>
      </div>
      <h3 class="empty-title">{{ 'portfolio.empty.title' | translate }}</h3>
      <p class="empty-description">
        {{ 'portfolio.empty.description' | translate }}
      </p>
    </div>
  </div>

  <!-- Project Details Modal -->
  <div 
    *ngIf="selectedProject" 
    class="modal-overlay" 
    (click)="closeDetails()"
  >
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <div class="modal-title-section">
          <h3 class="modal-title">{{ 'projects.' + selectedProject.id + '.title' | translate }}</h3>
          <span class="modal-category" [class]="selectedProject.type">
            <i [class]="selectedProject.type === 'personal' ? 'bi bi-person' : 'bi bi-briefcase'"></i>
            {{ selectedProject.type === 'personal' ? ('portfolio.project.personal' | translate) : ('portfolio.project.professional' | translate) }}
          </span>
        </div>
        <button class="close-button" (click)="closeDetails()">
          <i class="bi bi-x-lg"></i>
        </button>
      </div>

      <div class="modal-body">
        <div class="project-preview">
          <!-- Live Preview -->
          <div *ngIf="selectedProject.liveUrl" class="live-preview">
            <div class="browser-mockup">
              <div class="browser-header">
                <div class="browser-controls">
                  <span class="control red"></span>
                  <span class="control yellow"></span>
                  <span class="control green"></span>
                </div>
                <div class="browser-url">
                  <i class="bi bi-lock"></i>
                  <span>{{ selectedProject.liveUrl }}</span>
                </div>
              </div>
              <img 
                [src]="selectedProject.images[0]" 
                [alt]="selectedProject.title"
                class="preview-image"
                style="width: 100%; height: 250px; object-fit: cover; border-radius: 8px;"
              />
            </div>
          </div>

          <!-- Image Gallery -->
          <div *ngIf="!selectedProject.liveUrl && selectedProject.images.length > 0" class="image-gallery">
            <div class="gallery-main">
              <img 
                [src]="selectedProject.images[currentImageIndex]" 
                [alt]="selectedProject.title"
                class="gallery-image"
                style="width: 100%; height: 250px; object-fit: cover;"
              />
              <button 
                *ngIf="selectedProject.images.length > 1"
                class="gallery-nav prev" 
                (click)="prevImage()"
              >
                <i class="bi bi-chevron-left"></i>
              </button>
              <button 
                *ngIf="selectedProject.images.length > 1"
                class="gallery-nav next" 
                (click)="nextImage()"
              >
                <i class="bi bi-chevron-right"></i>
              </button>
            </div>
            <div *ngIf="selectedProject.images.length > 1" class="gallery-thumbnails">
              <button
                *ngFor="let image of selectedProject.images; let i = index"
                class="thumbnail"
                [class.active]="i === currentImageIndex"
                (click)="currentImageIndex = i"
              >
                <img [src]="image" [alt]="selectedProject.title + ' - ' + (i + 1)">
              </button>
            </div>
          </div>
        </div>

        <div class="project-info">
          <div class="project-details">
            <h4 class="details-title">{{ 'portfolio.project.description' | translate }}</h4>
            <p class="project-full-description">{{ 'projects.' + selectedProject.id + '.longDescription' | translate }}</p>
            
            <div class="tech-section">
              <h4 class="details-title">{{ 'portfolio.project.technologies' | translate }}</h4>
              <div class="tech-grid">
                <div class="tech-badge" *ngFor="let tech of selectedProject.frameworks">
                  <i [class]="getTechIcon(tech)"></i>
                  <span>{{ tech }}</span>
                </div>
              </div>
            </div>
          </div>

          <div class="project-actions">
            <a 
              *ngIf="selectedProject.liveUrl" 
              [href]="selectedProject.liveUrl" 
              target="_blank" 
              class="action-button primary"
            >
              <i class="bi bi-box-arrow-up-right"></i>
              <span>{{ 'portfolio.project.viewProject' | translate }}</span>
            </a>
            <a 
              *ngIf="selectedProject.githubUrl" 
              [href]="selectedProject.githubUrl" 
              target="_blank" 
              class="action-button secondary"
            >
              <i class="bi bi-github"></i>
              <span>{{ 'portfolio.project.viewCode' | translate }}</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>